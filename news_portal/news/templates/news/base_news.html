{% extends "base.html" %}

{% block title %}Новости{% endblock %}

{% block content %}
<div class="container h-100">
    <div class="row">
        <div class="h2 my-4">Последние новости</div>
        <div class="mb-4">
            <form method="get" action="{% url 'news' %}" class="row g-3">
                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text" id="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"></path>
                            </svg>
                        </span>
                        <input
                            type="text"
                            name="search_query"
                            class="form-control bg-light"
                            placeholder="Поиск по заголовку..."
                            aria-label="Заголовок статьи"
                            value="{{ search_query|default:'' }}"
                        />
                    </div>
                </div>
                <div class="mb-3">
                    <input
                        name="include_unpublished"
                        class="form-check-input"
                        type="checkbox"
                        value=True
                        id="check_unpublished"
                        {% if include_unpublished %}checked{% endif %}
                        onChange="this.form.submit()"
                    >
                    <label class="form-check-label" for="check_unpublished">
                        Неопубликованные
                    </label>
                </div>
            </form>
        </div>
        <div class="mb-3">
            <p>Найдено новостей: {{ news|length }}</p>
        </div>
        <div class="mb-3">
            {% for news_article in news %}
            <div class="card my-2 bg-light">
                <div class="card-body">
                    <h5 class="card-title">{{ news_article.title }}</h5>
                    <h6 class="card-subtitle mb-2 text-body-secondary">Автор: {{ news_article.author }}</h6>
                    <p class="card-text">{{ news_article.content|truncatewords:"150" }}</p>
                    <a href="{% url 'news_article' news_article.id %}" class="card-link">Читать полностью</a>
                    <div class="card-footer">
                        <p>Опубликовано: {{ news_article.created_at|date:"M d, Y" }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
